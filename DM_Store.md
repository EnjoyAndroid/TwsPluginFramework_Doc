## DM Store
### 市场简介
市场在UI表现为我的表盘、我的应用、表盘市场、应用市场和下载管理几个部分，按照功能主要分为两个部分：

- 管理模块：包括我的表盘和我的应用，主要提供切换表盘、查看、卸载、更新手表上表盘和应用等功能
- 市场模块：包括表盘市场、应用市场和下载管理，主要提供用户浏览、下载表盘和应用等功能
### 整体框架

![](http://i.imgur.com/8vPmbON.png)
### 表盘&应用管理
#### 我的表盘
- 展示当前手表上的所有表盘信息、提供更新、切换和卸载表盘功能
- 扫码安装表盘
#### 我的应用
- 展示当前手表上的所有应用信息、提供更新和卸载应用功能
![](http://i.imgur.com/MgUYEDy.png)

### 表盘&应用任务下载安装
#### 数据拉取展示
![](http://i.imgur.com/6DDOvyI.png)
#### 表盘应用下载安装
![](http://i.imgur.com/nk0DNrg.png)
### 数据库
![](http://i.imgur.com/yL1DqR9.png)
### 缓存机制

- 市场使用的缓存实现Volley提供的ImageCache接口
- 我的表盘和我的应用缓存机制
- https://developer.android.com/topic/performance/graphics/index.html
![](http://i.imgur.com/FY7BdnJ.jpg)
### TODO
1. 内存&缓存优化
	- 完善缓存机制，把从通过蓝牙获取表盘icon加入到缓存层级中，本地没有的时候，再从手表获取；现在的是手表连接后，检查本地icon是否存在，不存在从手表拉取
	- 我的表盘我的应用的缓存机制和市场合并，统一管理,目前会存在缓存相同数据两次的情况
	- 在单进程的插件框架模式下，是不是应该把缓存机制放到sharelib中，让所有的插件使用同一个缓存，减少OOM
2. 蓝牙通信次数优化
	- 现在每次断连都从手表完整拉取一次全量数据（不包括icon），后续是否可以做到差量更新
3. 数据库优化